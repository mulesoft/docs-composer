= NetSuite Connector Reference

Whether you are using NetSuite as a data source (take a new NetSuite contact and copy it to Salesforce, for example) or a data target (when a Salesforce opportunity closes, create a NetSuite sales order), the details of how to work with data in a flow are specific to the data source or data target.

== Connection Details

When connecting to NetSuite via MuleSoft Composer, in NetSuite:

* Ensure that token-based authentication is enabled by navigating to *Setup* > *Integration Management* > *Manage Integration* > *Authentication*.
* Ensure that the role used in the integration is not using two-factor authentication by navigating to *Setup* > *User/Roles* > *Two-Factor Authentication Roles*.

Composer supports NetSuite 2020.2 instances.

include::_partials/connection-definition.adoc[]

include::_partials/connection-name.adoc[]
+
You must connect to NetSuite as a regular user (WSU), not a concurrent user (cWSU).

include::_partials/netsuite-connection-details.adoc[]

//When creating a connection, note the following connection fields in NetSuite:

//* *Account ID*: The *Account ID* value associated with your NetSuite instance. You can view the account ID by navigating to *Setup* > *Integration* > *SOAP Web Services Preferences*.
//* *Consumer Key*: The *Consumer Key* value generated in NetSuite. You can generate a value for consumer key by navigating to *Setup* > *Integration* > *Manage Integrations*.
//* *Consumer Secret*: The *Consumer Secret* value generated in NetSuite. This value is generated when generating a value for *Consumer Key*.
//* *Token ID*: The *Token ID* value generated in NetSuite.
//* *Token Secret*: The *Token Secret* value generated with the token ID in NetSuite.

=== Establish a NetSuite Connection

To use MuleSoft Composer to establish a NetSuite connection, you must have:

* The MuleSoft Composer User permission set to `perform integration tasks`.

* An account in Salesforce to store the internal ID of the associated customer in NetSuite. You must ensure that a custom field, *NetSuite ID*, has been created for the Account object in the organization.

=== Set NetSuite Permissions

Access to NetSuite data and to the NetSuite user interface is based on users, roles, and permissions.

For more information on users, roles, and permissions, see the https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/chapter_N284861.html[NetSuite documentation].


=== Run Server SuiteScript to Trigger Workflows

If your NetSuite configuration preferences are set to run server SuiteScript and trigger workflows, the following criteria are required:

* The *Audience* field must have all roles selected.
* The *Execute As Role* field must be set to `Administrator`.
* The *Log Level* field must be set to `Debug`.

include::_partials/null-values.adoc[]

== Triggers

include::_partials/trigger-definition.adoc[]

On Updated Records::

A record is created or an existing record is updated.

On New Records::

A new record is created in NetSuite.

== Actions

include::_partials/action-definition.adoc[]

Update Record::

A record is changed.

Create Record::

A record is created.

Upsert Record::

A record is created or updated.

Delete Record::

A record is deleted

Get Records::

Returns a list of up to 500 records based on specific search criteria. The following fields are required:

* Object type
* Filter records

== Record Types

The following record types are supported.

[%header%autowidth.spread]
|===

|Record Type |Trigger |Action

|CASH_SALE |X |X
|CASH_REFUND |X |X
|CONTACT |X |X
|CREDIT_MEMO |X |X
|CURRENCY | |X
|CURRENCY_RATE | |X
|CUSTOMER |X |X
|CUSTOMER_DEPOSIT |X |X
|CUSTOMER_PAYMENT |X |X
|CUSTOMER_REFUND |X |X
|CUSTOM_RECORD_TYPES |X |X
|ESTIMATE |X |X
|EMPLOYEE |X |X
|INVENTORY_ITEM |X |X
|INVOICE |X |X
|JOURNAL_ENTRY |X |X
|LEAD |X |X
|LOT_NUMBERED_INVENTORY_ITEM |X |X
|NON_INVENTORY_PURCHASE_ITEM |X |X
|NON_INVENTORY_RESALE_ITEM |X |X
|NON_INVENTORY_SALE_ITEM |X |X
|OPPORTUNITY |X |X
|PARTNER |X |X
|PAYMENT_ITEM | |X
|PROSPECT |X |X
|PURCHASE_ORDER |X |X
|RETURN_AUTHORIZATION |X |X
|SALES_ORDER |X |X
|SERVICE_PURCHASE_ITEM |X |X
|SERVICE_RESALE_ITEM |X |X
|SERVICE_SALE_ITEM |X |X
|SUPPORT_CASE |X |X
|TIME_BILL |X |X
|TIME_SHEET |X |X
|VENDOR |X |X
|VENDOR_BILL |X |X

|===

[NOTE]
====
The CURRENCY and PAYMENT_ITEM objects are not supported by the GET RECORDS action.

The LEAD and PROSPECT objects are supported only by the GET RECORDS action. The LEAD and PROSPECT objects are subtypes of the CUSTOMER object, so to use the LEAD and PROSPECT objects for other actions, you can set the object type to CUSTOMER and set the `internalId` of `entityStatus` to the corresponding value according to the NetSuite documentation.

====

== Custom Fields

Using MuleSoft Composer, you can access custom field values for actions and triggers that you set in the NetSuite record.

//== Objects

//The following objects are available:

//* Service Sale Item
//* Service Purchase Item
//* Return Authorization
//kept but commented out the above Objects section in case I misunderstood Jan's instructions

== List Objects

List objects are supported.

== Custom Picklists

You can map values to custom picklists using the value name. Internal IDs are not required to map values to custom picklists.

include::_partials/see-also.adoc[]
