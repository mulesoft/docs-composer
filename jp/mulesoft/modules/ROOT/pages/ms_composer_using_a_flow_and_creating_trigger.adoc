= フローの使用とトリガーの作成

コンポーザーでフローを作成および設定して、組織のインテグレーションの問題に対応できます。コンポーザーの​_トリガー_​は、フローの一連のアクションです。これは、フローの最初のステップです。トリガーを作成する前に、まずフローを作成、コピー、またはインポートする必要があります。 

== フローを作成する

新しいフローを (最初からまたはテンプレートから) 作成したり、既存のフローを複製したりできます。

[[create-a-new-flow]]
=== 新しいフローを最初から作成する

新しいフローを最初から作成する手順は、次のとおりです。

ifeval::["{product}"=="salesforce"]
. コンポーザーの ​*[Home (ホーム)]*​ ページで、​*[Create New Flow (新規フローを作成)] > [Create Flow from Scratch (フローを最初から作成)]*​ をクリックします。 +
自動的にフローに名前が付けられます。
. 必要に応じて、​*[​_フロー名_​]*​ の横にある鉛筆アイコンをクリックしてフローの名前を変更します。有効な文字: A-Z、a-z、0-9、スペース、ハイフン ( - )、ドット ( . )、アンダースコア ( _ )。
. *[Save (保存)]*​ をクリックします。
endif::[]

ifeval::["{product}"=="mulesoft"]
. コンポーザーの ​*[Home (ホーム)]*​ ページで、​*[Create new flow (新規フローを作成)] > [Create Flow from Scratch (フローを最初から作成)]*​ をクリックします。 +
自動的にフローに名前が付けられます。
. 自動的に作成された新しいフローの名前を変更するには、​*[Untitled Flow (タイトル未定のフロー)]*​ の横にある鉛筆アイコンをクリックし、A-Z、a-z、0-9、スペース、ハイフン ( - )、ドット ( . )、アンダースコア ( _ ) の任意の文字を使用してカスタム名を作成します。
. *[Save (保存)]*​ をクリックします。
endif::[]

これでフロートリガーを作成する準備ができました。

[[create-a-new-flow-from-template]]
=== テンプレートから新しいフローを作成する

テンプレートから新しいフローを作成する手順は、次のとおりです。

. コンポーザーの ​*[Home (ホーム)]*​ ページで、​*[Create new flow (新規フローを作成)] > [Create Flow from Template (テンプレートからフローを作成)]*​ をクリックします。
. テンプレートオプションを調べて、使用するテンプレートを選択します。
. 前提条件を満たしていることを確認し、満たしている場合は、​*[Use this Template (このテンプレートを使用)]*​ をクリックします。
. フローに必要な接続と情報を設定します。
. *[Create flow (フローを作成)]*​ をクリックします。

これでフローを使用する準備ができました。テンプレートについての詳細は、​xref:ms_composer_build_a_flow_using_templates.adoc[「テンプレートを使用したフローのビルド」]​を参照してください。

=== 既存のフローを複製する

既存のフローを複製する手順は、次のとおりです。

ifeval::["{product}"=="salesforce"]
. *[Composer Flows (コンポーザーフロー)]*​ から、複製するフローの名前をクリックします。コンポーザーに ​*[Flow Details (フローの詳細)]*​ ページが表示されます。
. *[Clone (複製)]*​ をクリックします。
. コンポーザーは、既存のフローをコピーして、[Flow Details (フローの詳細)] ページで開きます。フローの名前は ​*[Copy of ​_original flow name_​ (元のフロー名のコピー)]*​ となります。
. 必要に応じて、​*[Copy of ​_original flow name_​ (元のフロー名のコピー)]*​ の横にある鉛筆アイコンをクリックしてフローの名前を変更します。有効な文字: A-Z、a-z、0-9、スペース、ハイフン ( - )、ドット ( . )、アンダースコア ( _ )。
. *[Save (保存)]*​ をクリックします。
endif::[]

ifeval::["{product}"=="mulesoft"]
. サイドバーから、​*[Flows (フロー)]*​ をクリックします。
. *[Flows (フロー)]*​ ページで、複製するフローの名前をクリックします。
. *[Clone (複製)]*​ をクリックします。
+
コンポーザーは、既存のフローをコピーして、[Flow Details (フローの詳細)] ページで開きます。フローの名前は ​*[Copy of ​_original flow name_​ (元のフロー名のコピー)]*​ となります。
. フローの名前を変更するには、​*[Copy of _original flow name_ (​_元のフロー名_​のコピー)]*​ の横にある鉛筆アイコンをクリックし、A-Z、a-z、0-9、スペース、ハイフン ( - )、ドット ( . )、アンダースコア ( _ ) の任意の文字を使用します。
. *[Save (保存)]*​ をクリックします。
endif::[]

== フローをエクスポートする 

フローを JSON ファイルとしてエクスポートする手順は、次のとおりです。 

ifeval::["{product}"=="salesforce"]
. 既存のフローを開きます。 +
*[<フロー名>]*​ ページが表示されます。
. *[Edit (編集)]*​ をクリックします。 
. レンチアイコン > ​*[Export (エクスポート)]*​ をクリックします。 +
フローが JSON ファイルとしてエクスポートされます。 
endif::[]

ifeval::["{product}"=="mulesoft"]
. 既存のフローを開きます。 +
*[<フロー名>]*​ ページが表示されます。
. *[View (表示)]*​ をクリックします。 
. レンチアイコン > ​*[Export (エクスポート)]*​ をクリックします。 +
フローが JSON ファイルとしてエクスポートされます。 
endif::[]

== フローをインポートする 

フローを JSON ファイルとしてインポートする手順は、次のとおりです。 

ifeval::["{product}"=="salesforce"]
. <<create-a-new-flow,新しいフローを作成>>​するか、既存のフローを開きます。 +
*[<フロー名>]*​ ページが表示されます。
. レンチアイコン > ​*[Import - Beta (インポート - ベータ)]*​ をクリックします。 +
*[Select Flow (フローを選択)]*​ ダイアログボックスが表示されます。 
. *[Select flow (フローを選択)]*​ をクリックします。 +
ファイルが表示されます。 
. アップロードする JSON ファイルを探して選択し、​*[Open (開く)]*​ をクリックします。 +
選択したファイルが ​*[Select Flow (フローを選択)]*​ ダイアログボックスに表示されます。 
. *[Connect with <Connector Name> (<コネクタ名> で接続)]*​ ドロップダウンリストから既存の接続を選択するか、または新しい接続を作成します。

* 既存の接続をクリックして選択します。
* *[Add new <Connector Name> Connection (新しい <コネクタ名> 接続を追加)]*​ をクリックし、新しい接続を作成して選択します。 +

. *[Import Flow (フローをインポート)]*​ をクリックします。フローをインポートすると、既存のフローが上書きされます。 +
フローがインポートされて ​*[<フロー名>]*​ ページに保存されます。 
. *[Save (保存)]*​ をクリックします。 +
フローがインポートされます。 
endif::[]

ifeval::["{product}"=="mulesoft"]
. <<create-a-new-flow,新しいフローを作成>>​するか、既存のフローを開きます。 +
*[<フロー名>]*​ ページが表示されます。
. *[View (表示)]*​ をクリックします。 +
*[<フロー名>]*​ ページが表示されます。
. レンチアイコン > ​*[Import - Beta (インポート - ベータ)]*​ をクリックします。 +
*[Select Flow (フローを選択)]*​ ダイアログボックスが表示されます。 
. *[Select flow (フローを選択)]*​ をクリックします。 +
ファイルが表示されます。 
. アップロードする JSON ファイルを探して選択し、​*[Open (開く)]*​ をクリックします。 +
選択したファイルが ​*[Select Flow (フローを選択)]*​ ダイアログボックスに表示されます。 
. *[Connect with <Connector Name> (<コネクタ名> で接続)]*​ ドロップダウンリストから既存の接続を選択するか、または新しい接続を作成します。

* 既存の接続をクリックして選択します。
* *[Add new <Connector Name> Connection (新しい <コネクタ名> 接続を追加)]*​ をクリックし、新しい接続を作成して選択します。 +

. *[Import Flow (フローをインポート)]*​ をクリックします。フローをインポートすると、既存のフローが上書きされます。 +
フローがインポートされて ​*[<フロー名>]*​ ページに保存されます。 
. *[Save (保存)]*​ をクリックします。 +
フローがインポートされます。 
endif::[]

== フローを更新する

フローを構築するときにオブジェクトレベルまたは項目レベルで更新されたデータを表示するには、フローの更新が必要になる場合があります。

オブジェクトを更新する手順は、次のとおりです。

. フローを開きます。
. 更新するトリガーまたはアクションカードの右上隅にある更新アイコンをクリックします。
+
image::composer_refresh_card.png["オブジェクトの [Refresh (更新)] ボタン"]
オブジェクト種別のキャッシュがクリアされて、新しいデータが取得されます。

項目を更新する手順は、次のとおりです。

. フローを開きます。
. トリガーまたはアクションカードの左下隅にある更新アイコンをクリックします。
+
image::composer_refresh_field.png["項目の [Refresh (更新)] ボタン"]
項目のキャッシュがクリアされます。項目の新しい値プロバイダーが取得されます。

== フロートリガーを作成する

フローを作成または複製したら、トリガー (フローを開始するイベントまたは時間間隔) を定義します。フローをテストまたはアクティブ化するには、トリガーステップが必要になります。

イベントに基づいてトリガーを定義する手順は、次のとおりです。

. フローを開きます (まだ開いていない場合)。​*[What Should Start This Flow? (このフローを開始する要素)]*​ ダイアログが表示されます。
. トリガーイベントが発生するコネクタを選択します。既存の接続が表示されます。
+
既存の接続を選択するか、新しい接続を作成できます。

* 既存の接続をクリックして選択します。
* *[Add new ​_connector name_​ Connection (新しい_コネクタ名_接続を追加)]*​ をクリックし、新しい接続を作成して選択します。 +
このダイアログの歯車アイコンをクリックして、接続の名前変更や削除を行うことができます。

. 接続を選択したら、トリガーステップが表示されます。
+
image::trigger-definition.png["トリガー定義ステップ", 600]
+
自動的にトリガーに名前が付けられます。どのトリガーも、イベントまたは操作とシステム名を組み合わせて名前が付けられます。たとえば、[On new record in Salesforce (Salesforce の新規レコード)] のようになります。

* 必要に応じて、トリガーの名前を変更できます。有効な文字: A-Z、a-z、0-9、スペース、ハイフン ( - )、ドット ( . )、アンダースコア ( _ )。

* フローを開始するイベントを選択します。必要に応じて、追加情報を入力します。

* *[Save (保存)]*​ をクリックします。

include::_partials/see-also.adoc[]
